<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>×™×¦×™×¨×ª ×ž×•×–×™×§×” ×‘-AI</title>
  <style>
    body {
      font-family: Arial;
      background: #111;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 15px;
    }
    textarea, button {
      width: 300px;
      padding: 10px;
      font-size: 16px;
    }
    audio {
      margin-top: 20px;
      width: 300px;
    }
  </style>
</head>
<body>

  <h2>ðŸŽµ ×™×¦×™×¨×ª ×ž×•×–×™×§×” ×‘-AI</h2>

  <textarea id="prompt" placeholder="×›×ª×•×‘ ×›××Ÿ ×ª×™××•×¨ ×œ×ž×•×–×™×§×”..."></textarea>
  <button onclick="createMusic()">×¦×•×¨ ×ž×•×–×™×§×”</button>

  <div id="status"></div>
  <audio id="player" controls></audio>

<script>
const API_KEY = "94c25388249024e3cb86baadbbe3ee5e7e16e34961e8a9b0fda5b8658897c752";

async function createMusic() {
  document.getElementById("status").innerText = "×©×•×œ×— ×‘×§×©×”...";

  const res = await fetch("https://api.piapi.ai/api/v1/task", {
    method: "POST",
    headers: {
      "x-api-key": API_KEY,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      model: "suno",
      task_type: "generate_music",
      input: {
        gpt_description_prompt: document.getElementById("prompt").value,
        lyrics_type: "instrumental"
      }
    })
  });

  const data = await res.json();
  const taskId = data.data.task_id;

  document.getElementById("status").innerText = "× ×•×¦×¨×” ×ž×©×™×ž×”... ×ž×ž×ª×™×Ÿ ×œ×ª×•×¦××”";

  checkResult(taskId);
}

async function checkResult(taskId) {
  const interval = setInterval(async () => {
    const res = await fetch(`https://api.piapi.ai/api/v1/task/${taskId}`, {
      headers: { "x-api-key": API_KEY }
    });

    const data = await res.json();

    if (data.data.status === "completed") {
      clearInterval(interval);
      const audioUrl = data.data.output.audio_url;
      document.getElementById("player").src = audioUrl;
      document.getElementById("status").innerText = "âœ… ×ž×•×›×Ÿ!";
    }
  }, 4000);
}
</script>

</body>
</html>
